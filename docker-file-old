ARG NODE_VERSION=24.7.0-alpine

FROM node:${NODE_VERSION} AS builder
WORKDIR /app

COPY package.json yarn.lock ./
RUN yarn install

COPY . .
RUN yarn build && yarn global add serve

EXPOSE 3000
CMD ["serve", "-s", "build"]